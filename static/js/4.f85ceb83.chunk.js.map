{"version":3,"sources":["components/Users/users.module.css","components/common/preloader/preloader.module.css","components/common/paginator/paginator.module.css","../node_modules/reselect/es/index.js","redux/users-selectors.js","components/common/preloader/Preloader.js","components/common/paginator/Paginator.js","components/Users/Users.js","components/Users/UsersAPIComponent.js","components/Users/UsersContainer.js"],"names":["module","exports","defaultEqualityCheck","a","b","areArgumentsShallowlyEqual","equalityCheck","prev","next","length","i","getDependencies","funcs","dependencies","Array","isArray","every","dep","dependencyTypes","map","join","Error","memoize","_len","arguments","memoizeOptions","_key","createSelectorCreator","func","undefined","lastArgs","lastResult","apply","getUsers","state","users","usersData","getPageSize","pageSize","getTotalUsersCount","totalUsersCount","getCurrentPage","currentPage","getIsFetching","isFetching","getFollowingProcess","followingProcess","Preloader","props","className","pr","loader","src","preloader","Paginator","portionSize","pagesCount","Math","ceil","pageMas","push","portionCount","useState","portionNumber","setPortionNumber","pg","pageUrl","value","onClick","p","onPageChanged","active","Users","us","u","users_item","to","id","photos","small","userPhoto","ava","name","status","location","button","followed","disabled","some","unfollowThunk","followThunk","UsersAPIComponent","pageNumber","setCurrentPage","this","console","log","React","Component","UsersContainer","connect","dispatch","userId","followThunkCreator","unfollowThunkCreator","setCurrentPageAC","getUsersThunkCreator"],"mappings":"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","file":"static/js/4.f85ceb83.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"users\":\"users_users__3LELD\",\"users_item\":\"users_users_item__3nk-Q\",\"ava\":\"users_ava__yQ4cD\",\"status\":\"users_status__QF7-S\",\"location\":\"users_location__3hUBa\",\"button\":\"users_button__3Bsu_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"preloader_loader__2O16Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pageUrl\":\"paginator_pageUrl__3N3xw\",\"active\":\"paginator_active__1TNj3\"};","function defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n  var length = prev.length;\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n\n  var lastArgs = null;\n  var lastResult = null;\n  // we reference arguments instead of spreading them for performance reasons\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++;\n      // apply arguments instead of spreading for performance.\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions));\n\n    // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      }\n\n      // apply arguments instead of spreading for performance.\n      return memoizedResultFunc.apply(null, params);\n    });\n\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n    selector.recomputations = function () {\n      return recomputations;\n    };\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n    return selector;\n  };\n}\n\nexport var createSelector = createSelectorCreator(defaultMemoize);\n\nexport function createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","import {createSelector} from \"reselect\"\r\n\r\n\r\n\r\nexport function getUsers(state) {\r\n\treturn state.users.usersData\r\n}\r\n\r\n\r\n/* тема сложные селекторы с библиотекой reselect\r\nexport function getUsersSuper(state)  {\r\n\treturn getUsers(state).filter(u => true)\r\n}\r\n\r\n\r\nexport const getUsersSuperSelector = createSelector(getUsers, getIsFetching, (usersData, isFetching) => {\r\n\treturn usersData.filter(u => true)\r\n}) \r\n*/\r\n\r\n\r\n\r\nexport function getPageSize(state) {\r\n\treturn state.users.pageSize\r\n}\r\n\r\n\r\nexport function getTotalUsersCount(state) {\r\n\treturn state.users.totalUsersCount\r\n}\r\n\r\n\r\nexport function getCurrentPage(state) {\r\n\treturn state.users.currentPage\r\n}\r\n\r\nexport function getIsFetching(state) {\r\n\treturn state.users.isFetching\r\n}\r\n\r\n\r\nexport function getFollowingProcess(state) {\r\n\treturn state.users.followingProcess\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport pr from './preloader.module.css';\r\nimport preloader from '../../../assets/img/preloader.svg'\r\n\r\nfunction Preloader(props) {\r\n    return (\r\n        <div>\r\n            {props.isFetching ? <img className={pr.loader} src={preloader} /> : null}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Preloader","import React, {useState} from 'react';\r\nimport pg from './paginator.module.css';\r\n\r\n\r\nfunction Paginator(props, portionSize = 5) {\r\n\r\n\tlet pagesCount = Math.ceil(props.totalUsersCount / props.pageSize)\r\n\tlet pageMas = []\r\n\tfor (var i = 1; i <= pagesCount; i++) {\r\n\t\tpageMas.push(i) \r\n\t}\r\n\r\n\r\n\tlet portionCount = Math.ceil(pagesCount / portionSize)\r\n\tlet [portionNumber, setPortionNumber] = useState(1)\r\n\tlet leftPageNumber = (portionNumber - 1) * portionSize + 1\r\n\tlet rightPageNumber = portionNumber * portionSize\r\n\r\n    return (\r\n\t\t<div className={pg.pageUrl}>\r\n\t\t\t{portionNumber > 1 ? <button value=\"back\" onClick={setPortionNumber(portionNumber - 1)}></button> : null}\r\n\r\n\t\t\t{pageMas\r\n\t\t\t\t//.filter(p => p >= leftPageNumber && p <= rightPageNumber) || .slice(leftPageNumber, rightPageNumber)   оба варианта не работают почему-то\r\n\t\t\t\t.map( (p) => {\r\n\t\t\t\treturn(\r\n\t\t\t\t\t<span \r\n\t\t\t\t\t\tonClick={ () => { props.onPageChanged(p) } }\r\n\t\t\t\t\t\tclassName={props.currentPage === p && pg.active}>{p}</span>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\r\n\r\n\t\t\t{portionNumber < portionCount ? <button value=\"next\" onClick={setPortionNumber(portionNumber + 1)}></button> : null}\r\n\t\t</div>\r\n    )\r\n}\r\n\r\nexport default Paginator","import React from 'react';\r\nimport us from './users.module.css';\r\n\r\nimport userPhoto from '../../assets/img/ava.png'\r\nimport Preloader from '../common/preloader/Preloader.js'\r\nimport Paginator from '../common/paginator/Paginator.js'\r\n\r\nimport * as axios from 'axios'\r\nimport {NavLink} from 'react-router-dom';\r\n\r\n\r\n\r\n\r\nfunction Users(props) {\r\n\treturn (\r\n\t\t<div className={us.users}>\r\n\t\t\t{props.usersData.map( (u) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className={us.users_item}>\r\n\t\t\t\t\t\t<NavLink to={'/profile/' + u.id}>\r\n\t\t\t\t\t\t\t<img src={u.photos.small != null ? u.photos.small : userPhoto} className={us.ava} />\r\n\t\t\t\t\t\t</NavLink>\r\n\r\n\t\t\t\t\t\t{u.name}\r\n\r\n\t\t\t\t\t\t{u.status\r\n\t\t\t\t\t\t\t? \t<div className={us.status}>\r\n\t\t\t\t\t\t\t\t\t\"{u.status}\"\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:  <span></span>\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t<div className={us.location}>\r\n\t\t\t\t\t\t\t{u.location}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={us.button}>\r\n\t\t\t\t\t\t\t{u.followed ? \r\n\t\t\t\t\t\t\t\t<button \r\n\t\t\t\t\t\t\t\t\tdisabled={props.followingProcess.some(id => id === u.id)} \r\n\t\t\t\t\t\t\t\t\tonClick={ () => {\tprops.unfollowThunk(u.id)\t} \r\n\t\t\t\t\t\t\t\t}>Удалить из друзей</button>\r\n\r\n\t\t\t\t\t\t\t\t: <button \r\n\t\t\t\t\t\t\t\t\tdisabled={props.followingProcess.some(id => id === u.id)} \r\n\t\t\t\t\t\t\t\t\tonClick={ () => { props.followThunk(u.id) }\r\n\r\n\t\t\t\t\t\t\t\t}>Добавить в друзья</button>}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>)\r\n\t\t\t})}\r\n\r\n\r\n\t\t\t<Paginator {...props} />\r\n\r\n\t\t\t<Preloader\r\n\t\t\t\tisFetching={props.isFetching} />\r\n\t\t\r\n\t\t</div>\t\r\n\t)\t\r\n}\r\n\r\n\r\nexport default Users;","import React from 'react';\r\n\r\nimport userPhoto from '../../assets/img/ava.png'\r\n\r\nimport {usersAPI} from '../../api/api.js'\r\nimport * as axios from 'axios'\r\n\r\n\r\nimport Users from './Users.js'\r\n\r\n\r\n\r\n\r\nclass UsersAPIComponent extends React.Component {\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getUsers(this.props.currentPage, this.props.pageSize)\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\tonPageChanged = (pageNumber) => {\r\n\t\tthis.props.setCurrentPage(pageNumber)\r\n\t\tthis.props.getUsers(this.props.currentPage, this.props.pageSize)\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\tconsole.log(\"render\")\r\n\t\treturn (\r\n\t\t\t<Users\r\n\t\t\t\tusersData={this.props.usersData}\r\n\t\t\t\ttotalUsersCount={this.props.totalUsersCount}\r\n\t\t\t\tpageSize={this.props.pageSize}\r\n\t\t\t\tcurrentPage={this.props.currentPage}\r\n\t\t\t\tonPageChanged={this.onPageChanged}\r\n\t\t\t\tisFetching={this.props.isFetching}\r\n\t\t\t\t\r\n\r\n\t\t\t\tfollowThunk={this.props.followThunk}\r\n\t\t\t\tunfollowThunk={this.props.unfollowThunk}\r\n\r\n\r\n\t\t\t\tfollowingProcess={this.props.followingProcess} />\t\t\t\t\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default UsersAPIComponent;","import React from 'react';\r\n\r\nimport {setCurrentPageAC, getUsersThunkCreator, followThunkCreator, unfollowThunkCreator} from '../../redux/users-reducer.js'\r\nimport {getUsers, getPageSize, getTotalUsersCount, getCurrentPage, getIsFetching, getFollowingProcess} from '../../redux/users-selectors.js'\r\nimport UsersAPIComponent from './UsersAPIComponent.js'\r\n\r\nimport {connect} from 'react-redux'\r\n\r\n\r\nlet mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tusersData: getUsers(state),\r\n\t\tpageSize: getPageSize(state),\r\n\t\ttotalUsersCount: getTotalUsersCount(state),\r\n\t\tcurrentPage: getCurrentPage(state),\r\n\t\tisFetching: getIsFetching(state),\r\n\t\tfollowingProcess: getFollowingProcess(state),\r\n\t}\r\n}\r\n\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tfollowThunk: (userId) => { dispatch( followThunkCreator(userId) ) },\r\n\t\tunfollowThunk: (userId) => { dispatch( unfollowThunkCreator(userId) ) },\r\n\r\n\t\tsetCurrentPage: (pageNumber) => { dispatch( setCurrentPageAC(pageNumber) ) },\r\n\r\n\t\tgetUsers: (currentPage, pageSize) => { dispatch( getUsersThunkCreator(currentPage, pageSize) ) }\r\n\t}\r\n}\r\n\r\n\r\nconst UsersContainer = connect(mapStateToProps, mapDispatchToProps)(UsersAPIComponent);\r\n\r\n\r\nexport default UsersContainer"],"sourceRoot":""}